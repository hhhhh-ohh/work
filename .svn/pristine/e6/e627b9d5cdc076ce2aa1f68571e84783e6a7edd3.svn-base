## nacos上sbc-service-mq.properties，新增以下配置
```properties
#社区团购-修改会员资金是否团长字段
spring.cloud.stream.bindings.account-funds-modify-is-leader-input.destination=q.account.funds.modify.is.leader
spring.cloud.stream.bindings.account-funds-modify-is-leader-output.destination=q.account.funds.modify.is.leader

community.delivery.path=/data/sbc/mq/communityDelivery
```

## nacos上sbc-pc.properties、sbc-mobile.properties，修改以下配置
jwt.excluded-urls 新增jwt过滤
```properties
jwt.excluded-urls=,/trade/unlogin/**,/customer/communityActivity/unlogin/*,/customer/communityActivity/tradePage
```

# cannel
***配置文件追加配置项*** ：/data/canal/conf/example/instance.properties
```properties
canal.instance.filter.regex=sbc-order.leader_trade_detail,sbc-marketing.community_statistics,sbc-marketing.community_statistics_customer,sbc-marketing.community_activity,sbc-marketing.community_sku_rel
```

# dbrelay
### ***配置文件追加配置项*** ：/data/s2b/dbreplay/conf/application.propertis
```properties
topics.canal=sbc-order.leader_trade_detail,sbc-marketing.community_statistics,sbc-marketing.community_statistics_customer,sbc-marketing.community_activity,sbc-marketing.community_sku_rel
```

### ***配置文件修改如下***: /data/s2b/dbreplay/conf/mongo/data/mapping/init.json
```json
{
    "trade" : ["trade_mapping.json","trade_item_mapping.json","consignee_mapping.json","trade_coupon_mapping.json","trade_groupon_mapping.json","trade_marketing_mapping.json","trade_marketing_sku_mapping.json","trade_item_marketing_mapping.json","trade_coupon_mapping_for_freight.json","trade_community_customer_mapping.json","trade_community_sku_mapping.json"],
    "returnOrder" : ["return_order_mapping.json","return_order_item_mapping.json"],
    "appointmentRecord": ["appointment_record_mapping.json"]
}
```
trade数组新增 "trade_community_customer_mapping.json","trade_community_sku_mapping.json"

### 新增文件： /data/s2b/dbreplay/conf/mongo/data/mapping
trade_community_customer_mapping.json
```json
{
  "replayTable" : "replay_trade_community_customer",
  "dispatch" :null,
  "pk": [],
  "mappingData": {
    "singleData": [
      {
        "field": "_id",
        "replayField": "tid",
        "dataType": 12
      }, {
        "field": "buyer._id",
        "replayField": "customer_id",
        "dataType": 12
      }, {
        "field": "communityTradeCommission.activityId",
        "replayField": "activity_id",
        "dataType": 12
      }, {
        "field": "communityTradeCommission.leaderId",
        "replayField": "leader_id",
        "dataType": 12
      },{
        "field": "communityTradeCommission.salesType",
        "replayField": "sales_type",
        "dataType": 4,
        "enumType": {
          "SELF": 0,
          "LEADER":1
        }
      },{
        "field": "tradePrice.totalPrice",
        "replayField": "total_price",
        "dataType": 3
      },{
        "field": "tradeState.createTime",
        "replayField": "create_time",
        "dataType": 93
      },{
        "field": "supplier.storeId",
        "replayField": "store_id",
        "dataType": -5
      }
    ],
    "arrayData": {}
  }
}
```

trade_community_sku_mapping.json
```json
{
  "replayTable" : "replay_trade_community_sku",
  "dispatch" :{
    "dispatch": null,
    "typeFilter": ["INSERT","UPDATE","DELETE"],
    "typeDispatch": {}
  },
  "pk": ["tid", "sku_id"],
  "mappingData": {
    "singleData": [
      {
        "field": "_id",
        "replayField": "tid",
        "dataType": 12
      }, {
        "field": "communityTradeCommission.activityId",
        "replayField": "activity_id",
        "dataType": 12
      }, {
        "field": "communityTradeCommission.leaderId",
        "replayField": "leader_id",
        "dataType": 12
      },{
        "field": "communityTradeCommission.customerId",
        "replayField": "leader_customer_id",
        "dataType": 12
      },{
        "field": "communityTradeCommission.leaderPhone",
        "replayField": "leader_phone",
        "dataType": 12
      },{
        "field": "communityTradeCommission.salesType",
        "replayField": "sales_type",
        "dataType": 4,
        "enumType": {
          "SELF": 0,
          "LEADER":1
        }
      },{
        "field": "tradeState.createTime",
        "replayField": "create_time",
        "dataType": 93
      }
    ],
    "arrayData": {
      "arrayRoot": "tradeItems",
      "mappingData": {
        "singleData": [
          {
            "field": "skuId",
            "replayField": "sku_id",
            "dataType": 12
          },
          {
            "field": "splitPrice",
            "replayField": "split_price",
            "dataType": 3
          },
          {
            "field": "num",
            "replayField": "num",
            "dataType": -5
          }
        ],
        "arrayData": {}
      }
    }
  }
}

```


## 小程序隐私授权注意事项
登录小程序后台-设置-基本设置-服务内容声明-用户隐私保护指引 ，设置并完善《用户隐私保护指引》。
在隐私协议中，1、开发者处理的信息  内容参考如下：
为了获取自提点位置信息，开发者将在获取你的明示同意后，收集你的位置信息。
为了使用语音输入功能，开发者将在获取你的明示同意后，访问你的麦克风。
为了使用小程序直播功能，开发者将在获取你的明示同意后，访问你的摄像头。
为了使用图片上传功能，开发者将在获取你的明示同意后，使用你的相册（仅写入）权限。
为了使用微信授权登录功能，开发者将在获取你的明示同意后，收集你的手机号。
开发者 收集你选中的照片或视频信息，用于附件上传功能。
