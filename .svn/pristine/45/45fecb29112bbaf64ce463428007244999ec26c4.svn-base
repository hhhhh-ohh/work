@startuml
start
:订单发货;
:根据请求头AppKey获取所对应的商户;
if(是否是供应商) then(Y)
    :调用order服务的供应商订单查询接口,验证订单是否可发货;
    :根据SkuNo调用goods批量查询商品信息接口，验证商品有效性;
    :调用order供应商发货数量验证接口;
    :查询物流公司信息是否正确;
    :调用order服务的供应商发货接口;
else
    :调用order服务的商家订单查询接口,验证订单是否可发货;
    :根据SkuNo调用goods批量查询商品信息接口，验证商品有效性;
    :调用order商家发货数量验证接口;
    :查询物流公司信息是否正确;
    :调用order服务的商家发货接口;
endif;
:返回发货订单流水号;
stop
@enduml