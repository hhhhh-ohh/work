-- 兼容企微客服脚本
ALTER TABLE `sbc-empower`.`customer_service_setting`
MODIFY COLUMN `platform_type` tinyint(4) NOT NULL COMMENT '推送平台类型：0：QQ客服 1：阿里云客服 2：企微客服' AFTER `store_id`,
ADD COLUMN `enterprise_id` varchar(32) NULL COMMENT '企业ID' AFTER `service_url`,
ADD COLUMN `group_status` tinyint(4) DEFAULT 0 COMMENT '在线客服分组是否启用 0 不启用， 1 启用' AFTER `enterprise_id`;

ALTER TABLE `sbc-empower`.`customer_service_setting_item`
ADD COLUMN `service_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '客服链接' AFTER `customer_service_account`,
ADD COLUMN `service_icon` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NULL DEFAULT NULL COMMENT '客服头像' AFTER `service_url`;

-- 商家端企微客服配置
UPDATE `sbc-setting`.`function_info` SET `system_type_cd` = 4, `menu_id` = 'fc8e147f3fe311e9828800163e0fc468', `function_title` = 'QQ在线客服查看', `function_name` = 'f_online_server_view', `remark` = NULL, `sort` = 1, `create_time` = NULL, `del_flag` = 0 WHERE `function_id` = 'fc92878c3fe311e9828800163e0fc468';
UPDATE `sbc-setting`.`function_info` SET `system_type_cd` = 4, `menu_id` = 'fc8e147f3fe311e9828800163e0fc468', `function_title` = 'QQ在线客服编辑', `function_name` = 'f_online_server_edit', `remark` = NULL, `sort` = 2, `create_time` = NULL, `del_flag` = 0 WHERE `function_id` = 'fc9287e83fe311e9828800163e0fc468';
UPDATE `sbc-setting`.`function_info` SET `system_type_cd` = 3, `menu_id` = 'fc8e19753fe311e9828800163e0fc468', `function_title` = 'QQ在线客服查看', `function_name` = 'f_online_server_view', `remark` = NULL, `sort` = 1, `create_time` = NULL, `del_flag` = 0 WHERE `function_id` = 'fc9288443fe311e9828800163e0fc468';
UPDATE `sbc-setting`.`function_info` SET `system_type_cd` = 3, `menu_id` = 'fc8e19753fe311e9828800163e0fc468', `function_title` = 'QQ在线客服编辑', `function_name` = 'f_online_server_edit', `remark` = NULL, `sort` = 2, `create_time` = NULL, `del_flag` = 0 WHERE `function_id` = 'fc92889c3fe311e9828800163e0fc468';
INSERT INTO `sbc-setting`.`function_info` (`function_id`, `system_type_cd`, `menu_id`, `function_title`, `function_name`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cc69429017ccad007a30000', 3, 'fc8e19753fe311e9828800163e0fc468', '微信在线客服查看', 'f_wechat_online_server_view', NULL, 3, '2021-10-29 14:50:04', 0);
INSERT INTO `sbc-setting`.`function_info` (`function_id`, `system_type_cd`, `menu_id`, `function_title`, `function_name`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cc69429017ccad0ce220001', 3, 'fc8e19753fe311e9828800163e0fc468', '微信在线客服编辑', 'f_wechat_online_server_edit', '', 4, '2021-10-29 14:50:54', 0);
INSERT INTO `sbc-setting`.`function_info` (`function_id`, `system_type_cd`, `menu_id`, `function_title`, `function_name`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cc69429017ccadd72220004', 4, 'fc8e147f3fe311e9828800163e0fc468', '微信在线客服查看', 'f_wechat_online_server_view', NULL, 3, '2021-10-29 15:04:43', 0);
INSERT INTO `sbc-setting`.`function_info` (`function_id`, `system_type_cd`, `menu_id`, `function_title`, `function_name`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cc69429017ccade3ca40005', 4, 'fc8e147f3fe311e9828800163e0fc468', '微信在线客服编辑', 'f_wechat_online_server_edit', NULL, 4, '2021-10-29 15:05:35', 0);
INSERT INTO `sbc-setting`.`authority` (`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cc69429017ccad28edc0002', 3, 'ff8080817cc69429017ccad007a30000', '微信在线客服查看', NULL, '/customerService/weChat/detail', 'GET', NULL, 1, '2021-10-29 14:52:49', 0);
INSERT INTO `sbc-setting`.`authority` (`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cc69429017ccad4a8a60003', 3, 'ff8080817cc69429017ccad0ce220001', '微信在线客服编辑', NULL, '/customerService/weChat/saveDetail', 'POST', NULL, 1, '2021-10-29 14:55:07', 0);
INSERT INTO `sbc-setting`.`authority` (`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cc69429017ccadfab6c0006', 4, 'ff8080817cc69429017ccade3ca40005', '微信在线客服编辑', NULL, '/customerService/weChat/saveDetail', 'POST', NULL, 1, '2021-10-29 15:07:09', 0);
UPDATE `sbc-setting`.`authority` SET `system_type_cd` = 3, `function_id` = 'fc9288443fe311e9828800163e0fc468', `authority_title` = 'QQ在线客服查看', `authority_name` = NULL, `authority_url` = '/customerService/qq/detail', `request_type` = 'GET', `remark` = NULL, `sort` = 2, `create_time` = NULL, `del_flag` = 0 WHERE `authority_id` = 'fc9ac2fc3fe311e9828800163e0fc468';
UPDATE `sbc-setting`.`authority` SET `system_type_cd` = 3, `function_id` = 'fc92889c3fe311e9828800163e0fc468', `authority_title` = 'QQ在线客服编辑', `authority_name` = NULL, `authority_url` = '/customerService/qq/saveDetail', `request_type` = 'POST', `remark` = NULL, `sort` = 3, `create_time` = NULL, `del_flag` = 0 WHERE `authority_id` = 'fc9ac3593fe311e9828800163e0fc468';
UPDATE `sbc-setting`.`authority` SET `system_type_cd` = 4, `function_id` = 'fc9287e83fe311e9828800163e0fc468', `authority_title` = 'QQ在线客服编辑', `authority_name` = NULL, `authority_url` = '/customerService/qq/saveDetail', `request_type` = 'POST', `remark` = NULL, `sort` = 3, `create_time` = NULL, `del_flag` = 0 WHERE `authority_id` = 'fc9ac4753fe311e9828800163e0fc468';
INSERT INTO `sbc-setting`.`function_info` (`function_id`, `system_type_cd`, `menu_id`, `function_title`, `function_name`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817ccf74c1017cd05740700000', 3, 'fc8e19753fe311e9828800163e0fc468', '查看分页素材列表', 'f_system_resource', NULL, 5, '2021-10-30 16:35:52', 0);
INSERT INTO `sbc-setting`.`function_info` (`function_id`, `system_type_cd`, `menu_id`, `function_title`, `function_name`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817ccf74c1017cd05992e00002', 3, 'fc8e19753fe311e9828800163e0fc468', '查看分页素材类目', 'f_system_resourceCates', NULL, 6, '2021-10-30 16:38:24', 0);
INSERT INTO `sbc-setting`.`function_info` (`function_id`, `system_type_cd`, `menu_id`, `function_title`, `function_name`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817ccf74c1017cd05bcfbb0005', 4, 'fc8e147f3fe311e9828800163e0fc468', '查看分页素材列表', 'f_system_resource', NULL, 4, '2021-10-30 16:40:50', 0);
INSERT INTO `sbc-setting`.`function_info` (`function_id`, `system_type_cd`, `menu_id`, `function_title`, `function_name`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817ccf74c1017cd05c44910006', 4, 'fc8e147f3fe311e9828800163e0fc468', '查看分页素材类目', 'f_system_resourceCates', NULL, 5, '2021-10-30 16:41:20', 0);
INSERT INTO `sbc-setting`.`authority` (`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817ccf74c1017cd05ab0670003', 3, 'ff8080817ccf74c1017cd05740700000', '查看分页素材列表', NULL, '/system/resources', 'POST', NULL, 1, '2021-10-30 16:39:37', 0);
INSERT INTO `sbc-setting`.`authority` (`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817ccf74c1017cd05b25ed0004', 3, 'ff8080817ccf74c1017cd05992e00002', '查看分页素材类目', NULL, '/system/resourceCates', 'GET', NULL, 1, '2021-10-30 16:40:07', 0);
INSERT INTO `sbc-setting`.`authority` (`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817ccf74c1017cd05d5c9d0007', 4, 'ff8080817ccf74c1017cd05bcfbb0005', '查看分页素材列表', NULL, '/system/resources', 'POST', NULL, 1, '2021-10-30 16:42:32', 0);
INSERT INTO `sbc-setting`.`authority` (`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817ccf74c1017cd05dca9f0008', 4, 'ff8080817ccf74c1017cd05c44910006', '查看分页素材类目', NULL, '/system/resourceCates', 'GET', NULL, 1, '2021-10-30 16:43:00', 0);


-- 商家端企微客服配置修改
UPDATE `sbc-setting`.`function_info` SET `system_type_cd` = 3, `menu_id` = 'fc8e19753fe311e9828800163e0fc468', `function_title` = '查看分页素材列表', `function_name` = 'f_system_resource', `remark` = NULL, `sort` = 5, `create_time` = '2021-10-30 16:35:52', `del_flag` = 1 WHERE `function_id` = 'ff8080817ccf74c1017cd05740700000';
UPDATE `sbc-setting`.`function_info` SET `system_type_cd` = 3, `menu_id` = 'fc8e19753fe311e9828800163e0fc468', `function_title` = '查看分页素材类目', `function_name` = 'f_system_resourceCates', `remark` = NULL, `sort` = 6, `create_time` = '2021-10-30 16:38:24', `del_flag` = 1 WHERE `function_id` = 'ff8080817ccf74c1017cd05992e00002';
UPDATE `sbc-setting`.`function_info` SET `system_type_cd` = 4, `menu_id` = 'fc8e147f3fe311e9828800163e0fc468', `function_title` = '查看分页素材列表', `function_name` = 'f_system_resource', `remark` = NULL, `sort` = 4, `create_time` = '2021-10-30 16:40:50', `del_flag` = 1 WHERE `function_id` = 'ff8080817ccf74c1017cd05bcfbb0005';
UPDATE `sbc-setting`.`function_info` SET `system_type_cd` = 4, `menu_id` = 'fc8e147f3fe311e9828800163e0fc468', `function_title` = '查看分页素材类目', `function_name` = 'f_system_resourceCates', `remark` = NULL, `sort` = 5, `create_time` = '2021-10-30 16:41:20', `del_flag` = 1 WHERE `function_id` = 'ff8080817ccf74c1017cd05c44910006';
INSERT INTO `sbc-setting`.`authority` (`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cd91b07017cdb9e2e6c0000', 3, 'ff8080817cc69429017ccad0ce220001', '查看分页素材列表', NULL, '/system/resources', 'POST', NULL, 2, '2021-11-01 21:09:09', 0);
INSERT INTO `sbc-setting`.`authority` (`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cd91b07017cdb9eb95d0001', 3, 'ff8080817cc69429017ccad0ce220001', '查看分页素材类目', NULL, '/system/resourceCates', 'GET', NULL, 3, '2021-11-01 21:09:45', 0);
INSERT INTO `sbc-setting`.`authority` (`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cd91b07017cdba0bfc90004', 4, 'ff8080817cc69429017ccade3ca40005', '查看分页素材列表', NULL, '/system/resources', 'POST', NULL, 2, '2021-11-01 21:11:58', 0);
INSERT INTO `sbc-setting`.`authority` (`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cd91b07017cdba165f90005', 4, 'ff8080817cc69429017ccade3ca40005', '查看分页素材类目', NULL, '/system/resourceCates', 'GET', NULL, 3, '2021-11-01 21:12:40', 0);
UPDATE `sbc-setting`.`authority` SET `system_type_cd` = 3, `function_id` = 'ff8080817ccf74c1017cd05740700000', `authority_title` = '查看分页素材列表', `authority_name` = NULL, `authority_url` = '/system/resources', `request_type` = 'POST', `remark` = NULL, `sort` = 1, `create_time` = '2021-10-30 16:39:37', `del_flag` = 1 WHERE `authority_id` = 'ff8080817ccf74c1017cd05ab0670003';
UPDATE `sbc-setting`.`authority` SET `system_type_cd` = 3, `function_id` = 'ff8080817ccf74c1017cd05992e00002', `authority_title` = '查看分页素材类目', `authority_name` = NULL, `authority_url` = '/system/resourceCates', `request_type` = 'GET', `remark` = NULL, `sort` = 1, `create_time` = '2021-10-30 16:40:07', `del_flag` = 1 WHERE `authority_id` = 'ff8080817ccf74c1017cd05b25ed0004';
UPDATE `sbc-setting`.`authority` SET `system_type_cd` = 4, `function_id` = 'ff8080817ccf74c1017cd05bcfbb0005', `authority_title` = '查看分页素材列表', `authority_name` = NULL, `authority_url` = '/system/resources', `request_type` = 'POST', `remark` = NULL, `sort` = 1, `create_time` = '2021-10-30 16:42:32', `del_flag` = 1 WHERE `authority_id` = 'ff8080817ccf74c1017cd05d5c9d0007';
UPDATE `sbc-setting`.`authority` SET `system_type_cd` = 4, `function_id` = 'ff8080817ccf74c1017cd05c44910006', `authority_title` = '查看分页素材类目', `authority_name` = NULL, `authority_url` = '/system/resourceCates', `request_type` = 'GET', `remark` = NULL, `sort` = 1, `create_time` = '2021-10-30 16:43:00', `del_flag` = 1 WHERE `authority_id` = 'ff8080817ccf74c1017cd05dca9f0008';
INSERT INTO `sbc-setting`.`authority`(`authority_id`, `system_type_cd`, `function_id`, `authority_title`, `authority_name`, `authority_url`, `request_type`, `remark`, `sort`, `create_time`, `del_flag`) VALUES ('ff8080817cd91b07017cdba05a100003', 4, 'ff8080817cc69429017ccadd72220004', '微信在线客服查看', NULL, '/customerService/weChat/detail/0', 'GET', NULL, 1, '2021-11-01 21:11:32', 0);