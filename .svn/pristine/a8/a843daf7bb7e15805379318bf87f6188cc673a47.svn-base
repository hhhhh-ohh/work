server.port=8888
management.server.port=8781
management.endpoints.enabled-by-default=true
# ----------------------------------------
# application info
# ----------------------------------------
info.app.name=DbReplay
info.app.description=sbc - DB replay platform
info.build.artifact=@project.artifactId@
info.build.version=@project.version@
info.app.encoding=@project.build.sourceEncoding@


# ----------------------------------------
# log config
# ----------------------------------------
logging.level.root=INFO
logging.level.com.wanmi=DEBUG
logging.level.org.springframework.jdbc.core=DEBUG
logging.level.org.springframework=WARN
logging.config=classpath:logback.xml

#-----------------------------------------
# db config
# ----------------------------------------
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://172.19.25.118:3306/s2b_statistics?characterEncoding=UTF-8&&zeroDateTimeBehavior=convertToNull&autoReconnect=true&failOverReadOnly=false&connectTimeout=30000&allowMultiQueries=true&serverTimezone=Asia/Shanghai&generateSimpleParameterMetadata=true
spring.datasource.username=root
spring.datasource.password=Wmi@2023
spring.datasource.dbcp2.min-idle=5
spring.datasource.dbcp2.max-wait-millis=3000
spring.datasource.dbcp2.initial-size=5
spring.datasource.dbcp2.log-abandoned=true
spring.datasource.dbcp2.remove-abandoned-on-maintenance=true
spring.datasource.dbcp2.remove-abandoned-timeout=600
spring.datasource.dbcp2.time-between-eviction-runs-millis=5000
spring.datasource.dbcp2.min-evictable-idle-time-millis=30000
spring.datasource.dbcp2.validation-query=SELECT 1
spring.datasource.dbcp2.test-while-idle=true
spring.datasource.dbcp2.test-on-borrow=true
spring.datasource.hikari.max-lifetime=120000

####mongo
spring.data.mongodb.uri=mongodb://s2b:S2b^2023@172.19.25.118:27017/s2b?replicaSet=rs1
#spring.data.mongodb.port = 27017
#spring.data.mongodb.database = s2b
spring.data.mongodb.repositories.enabled=true


#-----------------------------------------
# kafka config
# ----------------------------------------
spring.kafka.bootstrap-servers=172.19.25.118:9092
spring.kafka.producer.retries=0
spring.kafka.producer.batch-size=16384
spring.kafka.producer.buffer-memory=33554432
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.properties.linger.ms=1

#    kafka consumer
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.auto-commit-interval=100ms
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.properties.session.timeout.ms=180000
spring.kafka.consumer.group-id=zgl-group

canal.config.replay-table=coupon_code*:coupon_code

topics.canal=sbc-goods.goods,sbc-goods.goods_info,sbc-goods.goods_cate,sbc-goods.goods_brand,sbc-goods.store_cate,\
  sbc-goods.store_cate_goods_rela,sbc-goods.goods_info_spec_detail_rel,sbc-customer.customer,sbc-customer.customer_detail,\
  sbc-customer.customer_level,sbc-customer.employee,sbc-customer.store,sbc-customer.store_customer_rela,\
  sbc-customer.store_level,sbc-account.customer_funds,sbc-order.goods_customer_follow_action,sbc-order.purchase_action,\
  sbc-marketing.coupon_activity,sbc-marketing.coupon_activity_config,sbc-marketing.coupon_code_0,sbc-marketing.coupon_code_1,\
  sbc-marketing.coupon_code_2,sbc-marketing.coupon_code_3,sbc-marketing.coupon_code_4,sbc-marketing.coupon_info,\
  sbc-goods.booking_sale,sbc-goods.booking_sale_goods,sbc-goods.flash_sale_goods,sbc-goods.appointment_sale,\
  sbc-goods.appointment_sale_goods,sbc-goods.groupon_goods_info,sbc-goods\
  .groupon_share_record,sbc-goods.o2o_goods_extension,sbc-goods\
  .o2o_goods_sku_extension,sbc-goods.o2o_store_cate_base,sbc-customer.customer_delivery_address,\
  sbc-customer.customer_points_detail,sbc-setting.system_config,sbc-customer.third_login_relation,\
  sbc-marketing.coupon_marketing_scope,sbc-marketing.groupon_activity,\
  sbc-goods.goods_spec,sbc-setting.platform_address,\
  sbc-account.customer_funds_detail,sbc-marketing.o2o_coupon_marketing_store_rel,\
  sbc-marketing.o2o_marketing_participate_store,sbc-order.refund_order,sbc-customer.wechat_video_user

topics.canal.concurrency=2

## ??canal???1.1.6?????????
# topics.canal.replay=_

topics.capture=s2b.trade,s2b.returnOrder,s2b.appointmentRecord
#topics.capture=example
topics.capture.concurrency=2

mongo.capture.mapping.enable = true