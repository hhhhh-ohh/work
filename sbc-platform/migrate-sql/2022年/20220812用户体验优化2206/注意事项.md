## 1、商品es索引删除
删除：es_goods 和  es_goods_info
重新去初始化ES对应 商品（es_goods）

## 2、dbreplay同步数据时添加字段
###在/data/s2b/dbreplay/conf/mongo/data/mapping/trade_item_mapping.json对应的mappingData.arrayData.mappingData.singleData中添加映射：
```properties
{
    "field": "supplyPrice",
    "replayField": "supply_price",
    "dataType": 3
},
```

## 3、swagger权限校验，开启则前端访问swagger-ui需要用户密码（在mobile、pc、boss、supplier、provider对应的nacos增加配置）
```properties
#此处为swagger权限校验，开启则前端访问swagger-ui需要用户密码
swagger.basic.enable=true
swagger.basic.username=wanmi
swagger.basic.password=123456
```
## 4、添加消息/公告MQ配置（mq服务nacos配置）
```properties
#商家消息生产者
spring.cloud.stream.bindings.store-message-send-output.destination=q.app.store-message-send
#商家公告消费者
spring.cloud.stream.bindings.store-message-send-input.destination=q.app.store-message-send

#商家公告生产者
spring.cloud.stream.bindings.store-notice-send-output.destination=q.app.store-notice-send
spring.cloud.stream.rabbit.bindings.store-notice-send-output.producer.delayed-exchange=true
#商家公告消费者
spring.cloud.stream.bindings.store-notice-send-input.destination=q.app.store-notice-send
spring.cloud.stream.rabbit.bindings.store-notice-send-input.consumer.delayed-exchange=true
```

## 5、新增api.excluded-urls接口放行
###manage-base-application.properties 的 api.excluded-urls新增以下4个接口: 首页消息列表、消息详情、单个消息已读、全部已读
```properties
/storeMessage/topList,storeMessage/*,storeMessage/read/*,/storeMessage/batchRead
```

## 6、sbc-service-message.properties nacos添加分表配置
```properties
#添加以下配置
spring.shardingsphere.sharding.tables.store_message_detail.actual-data-nodes=ds0.store_message_detail_$->{0..4}
spring.shardingsphere.sharding.tables.store_message_detail.table-strategy.standard.sharding-column=store_id
spring.shardingsphere.sharding.tables.store_message_detail.table-strategy.standard.precise-algorithm-class-name=com.wanmi.sbc.message.algorithm.StoreMessageDetailShardingAlgorithm
#修改以下配置
spring.shardingsphere.sharding.binding-tables=app_message,vop_log,store_message_detail
```
## 7、魔方优化兼容处理boss运用后台以及商家后台配置不同的jwt.secret-key，魔方Jenkins打包调整

```properties
# secret setting，bossKey以及supplierKey对应boss后端服务和supplier后端服务配置的配置项：jwt.secret-key 对应值
export bossKey=eda1782204cf41efaca1e051ccc610be62acdcf24c09f011f343583c41cfb941f
export supplierKey=eda1782204cf41efaca1e051ccc610be62acdcf24c09f011f343583c41cfb941f
```
###同时在yarn add:config自后追加配置项：
```properties
bossKey:${bossKey},supplierKey:${supplierKey}
```
## 8、nacos配置文件添加（common.properties、sbc-service-marketing.properties）
```properties
# 使用okhttp
feign.okhttp.enabled=true
# 开启请求数据的压缩功能
feign.compression.request.enabled=false
# 开启返回数据的压缩功能
feign.compression.response.enabled=true
# 压缩类型
feign.compression.request.mime-types=text/xml,application/xml, application/json
# 最小压缩值标准，当数据大于 1024 才会进行压缩
feign.compression.request.min-request-size=1024
```
