# canal
*/data/canal/conf/example/instance.properties新增了监听的表，尾部追加，配置如下：
  * instance.propertis
    ```properties
       canal.instance.filter.regex=sbc-marketing.marketing_buyout_price_level,sbc-marketing.marketing_half_price_second_piece,sbc-marketing.marketing_suits,sbc-marketing.marketing_suits_sku
    ```
#dbrelay
* dbreplay配置文件dbReplay服务下的/data/s2b/dbreplay/conf/application.propertis追加，配置如下：
  * application.propertis
    ```properties
      topics.canal=sbc-marketing.marketing_buyout_price_level,sbc-marketing.marketing_half_price_second_piece,sbc-marketing.marketing_suits,sbc-marketing.marketing_suits_sku
    ```

##dbReplay服务下的conf/mongo/data/mapping/trade_item_mapping.json文件增加
````json
    ,
    {
    "field": "suitsId",
    "replayField": "suits_id",
    "dataType": -5
    }
````

##5.dbReplay服务下的conf/mongo/data/mapping/trade_mapping.json文件增加
````json
    ,
    {
    "field": "suitMarketingFlag",
    "replayField": "suit_marketing_flag",
    "dataType": -6
    },
    {
    "field": "suitsId",
    "replayField": "suits_id",
    "dataType": -5
    }
````
## 6清除营销插件配置缓存
```
redis-cli keys "marketing_plugin_cache*" | xargs redis-cli del
```

## 7、es商品同步数据

## 8、mq服务的nacos配置新增：
```properties
#商品-更新店铺信息时，更新商品goods中对应店铺名称，同步es
spring.cloud.stream.bindings.es-goods-modify-store-name-input.destination=q.es.goods.modify.store.name
spring.cloud.stream.bindings.es-goods-modify-store-name-output.destination=q.es.goods.modify.store.name
```