@startuml
start
:校验入参的必填、长度、规格正确性;
if(商家?)then(yes)
    :校验市场价;
    :获取默认运费模板;
else
    :校验供货价;
    :销售类型、定时上架设置、购买方式默认值;
endif;
:根据商品编码和店铺id获取商品;
:验证店铺分类id是否在签约范围内;
:更新同SPU的其他SKU的商品名称;
if(销售类型是否改变?)then(yes)
   if(:是否参与预约和预售?)then(yes)
      :返回错误;
      stop;
   endif;
   :更新同SPU的其他SKU的销售类型;
endif;
if(商家?) then (yes)
:校验规格;
:更新规格值表;
:更新规格值与SKU关联信息;
endif;
:更新店铺分类关联信息;
:更新商品图片信息;
:更新商品信息;
:更新商品SKU信息;
:同步商品ES;
:编辑成功;
stop
@enduml